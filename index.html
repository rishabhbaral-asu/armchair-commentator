<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>The Tempe Torch | Gameday Central</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
        <link href="https://fonts.googleapis.com/css2?family=UnifrakturMaguntia&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital,wght@0,900;1,900&display=swap" rel="stylesheet">
        <style>
            :root { --asu-maroon: #8c1d40; --asu-gold: #ffc627; --ink: #1a1a1a; --paper: #f4f1ea; }
            body { font-family: 'Libre Baskerville', serif; background: var(--asu-maroon); color: var(--ink); margin: 0; padding-top: 50px; }
            
            /* DYNAMIC TICKER */
            .ticker-wrap { width: 100%; height: 50px; background: black; border-bottom: 3px solid var(--asu-gold); overflow: hidden; position: fixed; top: 0; z-index: 1000; display: flex; align-items: center; }
            .ticker-content { display: flex; white-space: nowrap; animation: ticker 40s linear infinite; }
            @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
            .ticker-item { display: flex; align-items: center; padding: 0 40px; color: var(--asu-gold); font-family: sans-serif; font-weight: 900; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px; }
            .live-indicator { color: #ff4444; animation: blink 1.5s infinite; margin-right: 10px; }
            @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }

            /* BROADSHEET STRUCTURE */
            .broadsheet { background: var(--paper); max-width: 1200px; margin: 30px auto; padding: 60px; box-shadow: 0 0 70px rgba(0,0,0,0.7); border: 1px solid #d1cfc8; position: relative; }
            .masthead { border-bottom: 8px double var(--ink); text-align: center; margin-bottom: 30px; }
            .masthead h1 { font-family: 'UnifrakturMaguntia', serif; font-size: 7.5rem; color: var(--asu-maroon); margin: 0; line-height: 1; cursor: pointer; }
            
            /* NAVIGATION BAR */
            .nav-bar { border-top: 2px solid var(--ink); border-bottom: 2px solid var(--ink); padding: 10px 0; margin-bottom: 40px; display: flex; justify-content: center; gap: 40px; }
            .nav-item { font-family: sans-serif; font-weight: 900; font-size: 0.8rem; text-transform: uppercase; cursor: pointer; color: var(--ink); transition: color 0.2s; }
            .nav-item:hover { color: var(--asu-maroon); text-decoration: underline; }
            .nav-item.active { color: var(--asu-maroon); text-decoration: underline; }

            /* TYPOGRAPHY */
            .headline { font-family: 'Playfair Display', serif; font-weight: 900; line-height: 0.9; color: var(--ink); letter-spacing: -2px; }
            .subheadline { font-style: italic; font-size: 1.4rem; color: #222; display: block; margin: 20px 0; border-bottom: 1px solid #bbb; padding-bottom: 15px; }
            .columns { column-count: 3; column-gap: 35px; text-align: justify; font-size: 0.9rem; line-height: 1.45; }
            .dropcap { float: left; font-size: 6rem; line-height: 0.7; padding-top: 15px; padding-right: 12px; font-family: 'Playfair Display', serif; color: var(--asu-maroon); font-weight: 900; }

            /* SCORE CARDS */
            .score-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
            .score-card { border: 2px solid var(--ink); background: white; padding: 15px; position: relative; transition: transform 0.2s; }
            .score-card:hover { transform: translateY(-3px); box-shadow: 5px 5px 0px rgba(0,0,0,0.1); }
            .card-status { font-family: sans-serif; font-size: 0.65rem; font-weight: 900; letter-spacing: 1px; color: white; background: var(--ink); padding: 4px 8px; display: inline-block; margin-bottom: 10px; }
            .card-status.final { background: #000; }
            .card-status.live { background: #ff4444; }
            .teams-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-weight: bold; }
            .team-score { font-size: 1.5rem; font-family: 'Playfair Display', serif; }
            .card-btn { display: block; width: 100%; text-align: center; background: var(--paper); border: 1px solid var(--ink); padding: 8px; margin-top: 10px; font-size: 0.7rem; font-weight: bold; cursor: pointer; text-transform: uppercase; }
            .card-btn:hover { background: var(--asu-maroon); color: white; }

            .page-content { display: none; }
            .page-active { display: block; }

            /* DETAIL PAGE STYLES */
            .lineup-card { border: 2px solid var(--ink); background: white; margin-bottom: 25px; box-shadow: 4px 4px 0px rgba(0,0,0,0.1); }
            .lineup-header { padding: 12px; display: flex; align-items: center; gap: 15px; font-weight: 900; text-transform: uppercase; border-bottom: 2px solid var(--ink); }
            .lineup-grid { padding: 15px; display: grid; grid-template-columns: 1fr; gap: 4px; font-size: 0.75rem; font-weight: bold; }
            .analysis-box { background: #e9e5db; padding: 20px; border: 1px solid #c5c1b5; margin-top: 20px; position: relative; }
            .analysis-box:before { content: "STAFF ANALYSIS"; position: absolute; top: -10px; left: 20px; background: var(--asu-maroon); color: white; padding: 2px 10px; font-size: 0.65rem; font-weight: 900; }
        </style>
    </head>
    <body>

        <div class="ticker-wrap">
            <div class="ticker-content" id="ticker-feed">
                </div>
        </div>

        <div class="broadsheet animate__animated animate__fadeIn">
            <header class="masthead">
                <h1 onclick="navigateTo('feed')">The Tempe Torch</h1>
                <div class="date-line">
                    <span>SUNDAY MORNING POST</span>
                    <span>FEBRUARY 8, 2026</span>
                    <span>TEMPE, ARIZONA — EST. 2024</span>
                </div>
            </header>

            <nav class="nav-bar">
                <span class="nav-item" onclick="navigateTo('feed')">Front Page</span>
                <span class="nav-item" onclick="navigateTo('scores')">Scoreboard</span>
                <span class="nav-item" onclick="navigateTo('hockey')">Hockey Recap</span>
                <span class="nav-item" onclick="navigateTo('cricket')">Cricket Recap</span>
            </nav>

            <main id="feed" class="page-content page-active">
                <div class="border-b-4 border-ink pb-8 mb-8">
                    <h2 class="headline text-8xl mb-4">DEVILS FALL SHORT IN THRILLER</h2>
                    <span class="subheadline">Late rally not enough as St. Cloud State holds on 4-3; Hockey team swept at home despite heroic third period push.</span>
                    <div class="columns">
                        <span class="dropcap">H</span>eartbreak at the Mullett. The Arizona State Sun Devils (13-16-1) mounted a furious comeback in the third period but ultimately fell 4-3 to St. Cloud State on Saturday night, completing a weekend sweep for the Huskies. Down 4-1 with ten minutes to go, ASU finally broke the "Husky Trap" that had stifled them all weekend. Goals from Bennett Schimek and a power-play blast from Cruz Lucius brought the crowd of 5,000 to their feet, turning the final 90 seconds into a siege on the SCSU net.
                        <br><br>
                        However, goaltender Patriks Berzins stood tall when it mattered most, denying a point-blank chance from Dylan Jackson as time expired. "We played 50 minutes of good hockey tonight, but in this conference, you need 60," Coach Powers said post-game. The loss drops ASU further in the NCHC standings, making next week's road trip a do-or-die scenario for home-ice advantage in the playoffs.
                    </div>
                    <div class="mt-6"><button class="card-btn" style="width:auto; padding:10px 30px;" onclick="navigateTo('hockey')">FULL GAME RECAP & BOX SCORE &rarr;</button></div>
                </div>

                <div class="grid md:grid-cols-2 gap-12">
                    <div>
                        <h3 class="headline text-5xl mb-6">MUMBAI: INDIA SURVIVES USA SCARE</h3>
                        <p class="text-sm italic mb-4">By Special Dispatch | Wankhede Stadium</p>
                        <div class="columns" style="column-count: 2;">
                            In a match that was closer than the scorecard suggests, India defeated the USA by 29 runs to open their 2026 World Cup campaign. Suryakumar Yadav was the savior for the hosts, smashing a captain's knock of 84* after the American pacers reduced India to 77/6. The USA chase started brightly but crumbled against the spin of Axar Patel (2/16).
                        </div>
                        <div class="mt-4"><button class="card-btn" onclick="navigateTo('cricket')">FULL MATCH REPORT &rarr;</button></div>
                    </div>
                    <div class="bg-slate-100 p-6 border-l-4 border-asu-maroon">
                        <h4 class="font-black uppercase text-xl mb-6">Live Wire</h4>
                        <ul class="list-disc pl-5 space-y-4 text-sm font-serif">
                            <li><strong>Basketball (LIVE):</strong> ASU vs Colorado. High drama in Boulder as the Devils look to steal a road win.</li>
                            <li><strong>Softball:</strong> ASU 8, Northwestern 0. Complete dominance in the Kajikawa Classic as the Sun Devils run-rule the Wildcats in 5 innings.</li>
                        </ul>
                        <div class="mt-6 pt-4 border-t border-slate-300">
                            <span class="text-xs font-bold text-asu-maroon cursor-pointer hover:underline" onclick="navigateTo('scores')">VIEW FULL SCOREBOARD &rarr;</span>
                        </div>
                    </div>
                </div>
            </main>

            <section id="scores" class="page-content">
                <h2 class="headline text-6xl mb-8 uppercase text-center border-b-2 border-ink pb-4">Gameday Scoreboard</h2>
                <div id="scoreboard-grid" class="score-grid"></div>
            </section>

            <section id="hockey" class="page-content">
                <span class="text-xs font-bold text-asu-maroon cursor-pointer hover:underline" onclick="navigateTo('feed')">&larr; BACK TO FRONT PAGE</span>
                <h2 class="headline text-6xl my-6 uppercase">Recap: Too Little, Too Late</h2>
                <div class="columns">
                    <p>St. Cloud State jumped out to a 2-0 lead early, punishing ASU defensive turnovers. The Sun Devils seemed lifeless until the third period, when desperation finally set in. Bennett Schimek's goal at 12:45 breathed life into the building, and when Lucius scored on a 6-on-4 advantage, the comeback seemed destined. But the hole dug in the first 40 minutes proved too deep.</p>
                </div>
                <div class="analysis-box text-sm italic">
                    <strong>Stat of the Night:</strong> ASU outshot SCSU 41-26 but went just 1-for-5 on the power play. The inability to convert special teams chances defined the weekend sweep.
                </div>
                <div class="mt-8 border-t pt-4">
                     <h3 class="font-bold text-xl mb-4">Final Box Score</h3>
                     <table class="w-full text-sm border">
                         <tr class="bg-gray-100 border-b"><th class="p-2 text-left">Team</th><th class="p-2">1</th><th class="p-2">2</th><th class="p-2">3</th><th class="p-2">F</th></tr>
                         <tr class="border-b"><td class="p-2 font-bold">St. Cloud State</td><td class="p-2 text-center">1</td><td class="p-2 text-center">2</td><td class="p-2 text-center">1</td><td class="p-2 text-center font-bold">4</td></tr>
                         <tr><td class="p-2 font-bold">Arizona State</td><td class="p-2 text-center">0</td><td class="p-2 text-center">1</td><td class="p-2 text-center">2</td><td class="p-2 text-center font-bold">3</td></tr>
                     </table>
                </div>
            </section>

            <section id="cricket" class="page-content">
                <span class="text-xs font-bold text-asu-maroon cursor-pointer hover:underline" onclick="navigateTo('feed')">&larr; BACK TO FRONT PAGE</span>
                <h2 class="headline text-6xl my-6 uppercase">Recap: SKY Saves India</h2>
                <div class="columns">
                    <p>For 12 overs, the USA dared to dream. Mohammed Mohsin and Ali Khan ripped through the Indian top order, leaving the Wankhede stunned. But Suryakumar Yadav (84 off 48) played an innings of pure class, dragging India to 161. In reply, the USA lost wickets at regular intervals to Mohammed Siraj (3/22) and never recovered.</p>
                </div>
                <div class="analysis-box text-sm italic">
                    <strong>Turning Point:</strong> The wicket of Monank Patel in the powerplay. Once the captain fell, the chase lost its anchor, allowing India's spinners to squeeze the middle overs.
                </div>
                <div class="mt-8 border-t pt-4">
                     <h3 class="font-bold text-xl mb-4">Brief Scorecard</h3>
                     <div class="grid grid-cols-2 gap-4 text-sm">
                         <div class="border p-4">
                             <strong>INDIA: 161/6 (20.0)</strong><br>
                             S. Yadav 84* (48)<br>
                             T. Varma 32 (24)<br>
                             S. Netravalkar 2/28
                         </div>
                         <div class="border p-4">
                             <strong>USA: 132/8 (20.0)</strong><br>
                             A. Gous 41 (35)<br>
                             S. Mukkamalla 28 (20)<br>
                             M. Siraj 3/22
                         </div>
                     </div>
                </div>
            </section>

            <footer class="mt-12 border-t-4 double border-ink pt-6 text-[11px] uppercase font-bold text-center tracking-widest">
                CERTIFIED LOCAL COVERAGE — ESTABLISHED 2024 — TEMPE'S JOURNAL OF RECORD
            </footer>
        </div>

        <script>
            function navigateTo(pageId) {
                document.querySelectorAll('.page-content').forEach(p => p.classList.remove('page-active'));
                document.getElementById(pageId).classList.add('page-active');
                window.scrollTo(0,0);
            }

            // === ROBUST DATA CENTER (PROXY ROTATION SYSTEM) ===
            const CORS_PROXIES = [
                "https://corsproxy.io/?",
                "https://api.allorigins.win/raw?url="
            ];
            
            const APIS = {
                hockey: "https://site.api.espn.com/apis/site/v2/sports/hockey/mens-college-hockey/scoreboard",
                basketball: "https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/scoreboard",
                softball: "https://site.api.espn.com/apis/site/v2/sports/baseball/softball/scoreboard"
            };

            const TEAMS = {
                ASU_HOCKEY: "58",
                ASU_BBALL: "9",
                ASU_SOFTBALL: "9"
            };

            // SAFE FALLBACK: If everything fails, these specific hardcoded scores will show.
            const SAFE_DATA = [
                { sport: "NCAA BASKETBALL", home: "Colorado", away: "ASU", status: "LIVE", score: "60 - 56", timeInfo: "9:31 - 2nd", detailPage: null },
                { sport: "NCHC HOCKEY", home: "ASU", away: "St. Cloud St.", status: "FINAL", score: "3 - 4", timeInfo: "Saturday Night", detailPage: "hockey" },
                { sport: "T20 WORLD CUP", home: "India", away: "USA", status: "FINAL", score: "161/6 - 132/8", timeInfo: "India won by 29 runs", detailPage: "cricket" },
                { sport: "NCAA SOFTBALL", home: "ASU", away: "Northwestern", status: "FINAL", score: "8 - 0", timeInfo: "Kajikawa Classic", detailPage: null }
            ];

            let gamesDatabase = [...SAFE_DATA];

            // RENDER UI
            function renderUI() {
                const grid = document.getElementById('scoreboard-grid');
                const ticker = document.getElementById('ticker-feed');
                grid.innerHTML = '';
                let tickerHTML = '';

                gamesDatabase.forEach(game => {
                    let statusClass = game.status.toLowerCase();
                    if(game.status === 'LIVE') statusClass = 'live';

                    // Card
                    const card = document.createElement('div');
                    card.className = 'score-card';
                    card.innerHTML = `
                        <div class="card-status ${statusClass}">${game.status} • ${game.sport}</div>
                        <div class="teams-row"><span>${game.home}</span><span class="team-score">${game.score.split('-')[0].trim()}</span></div>
                        <div class="teams-row"><span>${game.away}</span><span class="team-score">${game.score.split('-')[1] ? game.score.split('-')[1].trim() : ''}</span></div>
                        <div class="text-xs text-center text-gray-500 font-sans border-t pt-2 mt-2">${game.timeInfo}</div>
                        ${game.detailPage ? `<button class="card-btn" onclick="navigateTo('${game.detailPage}')">Read Report</button>` : ''}
                    `;
                    grid.appendChild(card);

                    // Ticker
                    if (game.status === 'LIVE') {
                        tickerHTML += `<div class="ticker-item"><span class="live-indicator">● LIVE</span> ${game.home} ${game.score} ${game.away} (${game.timeInfo})</div>`;
                    } else if (game.status === 'FINAL') {
                        tickerHTML += `<div class="ticker-item">FINAL: ${game.home} ${game.score} ${game.away}</div>`;
                    } else {
                        tickerHTML += `<div class="ticker-item">UPCOMING: ${game.home} vs ${game.away} (${game.timeInfo})</div>`;
                    }
                });

                tickerHTML += `<div class="ticker-item" style="color:white">THE TEMPE TORCH — EST. 2024</div>`;
                ticker.innerHTML = tickerHTML;
            }

            // ROBUST FETCHER
            async function fetchWithRetry(url) {
                for (const proxy of CORS_PROXIES) {
                    try {
                        const res = await fetch(proxy + encodeURIComponent(url));
                        if (res.ok) return await res.json();
                    } catch (e) {
                        console.warn(`Proxy ${proxy} failed, trying next...`);
                    }
                }
                throw new Error("All proxies failed");
            }

            async function fetchLiveSports() {
                console.log("Fetching live data...");
                let newGames = [];
                
                try {
                    // Try fetch Basketball (Highest Priority for Live)
                    const bData = await fetchWithRetry(APIS.basketball);
                    const asuBball = findGame(bData, TEAMS.ASU_BBALL);
                    if(asuBball) newGames.push(formatESPNData(asuBball, "NCAA BASKETBALL", null));

                    // Try fetch Hockey
                    const hData = await fetchWithRetry(APIS.hockey);
                    const asuHockey = findGame(hData, TEAMS.ASU_HOCKEY);
                    if(asuHockey) newGames.push(formatESPNData(asuHockey, "NCHC HOCKEY", "hockey"));

                    // Try fetch Softball
                    const sData = await fetchWithRetry(APIS.softball);
                    const asuSoftball = findGame(sData, TEAMS.ASU_SOFTBALL);
                    if(asuSoftball) newGames.push(formatESPNData(asuSoftball, "NCAA SOFTBALL", null));

                    // Keep Hardcoded Cricket (No reliable API)
                    newGames.push(SAFE_DATA.find(g => g.sport === "T20 WORLD CUP"));

                    if(newGames.length > 0) {
                        // Merge with safe data to ensure nothing is missing
                        gamesDatabase = newGames;
                        // Add missing safe data if API didn't return them (e.g. if season ended)
                        SAFE_DATA.forEach(safe => {
                            if(!gamesDatabase.some(g => g.sport === safe.sport)) gamesDatabase.push(safe);
                        });
                        renderUI();
                    }
                } catch (e) {
                    console.log("Live fetch failed, using fallback.");
                }
            }

            function findGame(data, teamId) {
                if(!data || !data.events) return null;
                return data.events.find(e => e.competitions[0].competitors.some(c => c.id === teamId));
            }

            function formatESPNData(game, sportLabel, linkId) {
                const comp = game.competitions[0];
                const home = comp.competitors.find(c => c.homeAway === 'home');
                const away = comp.competitors.find(c => c.homeAway === 'away');
                const statusState = game.status.type.state; 

                let statusText = "UPCOMING";
                let scoreText = "vs";
                let timeText = new Date(game.date).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

                if (statusState === 'in') {
                    statusText = "LIVE";
                    scoreText = `${home.score} - ${away.score}`;
                    timeText = game.status.type.shortDetail; 
                } else if (statusState === 'post') {
                    statusText = "FINAL";
                    scoreText = `${home.score} - ${away.score}`;
                    timeText = "Final";
                }

                return {
                    sport: sportLabel,
                    home: home.team.abbreviation,
                    away: away.team.abbreviation,
                    status: statusText,
                    score: scoreText,
                    timeInfo: timeText,
                    detailPage: linkId
                };
            }

            // INIT
            renderUI(); // Render fallback immediately
            fetchLiveSports(); // Try fetch
            setInterval(fetchLiveSports, 60000); // Poll every 60s
        </script>
    </body>
</html>
